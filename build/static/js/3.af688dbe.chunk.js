(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{582:function(e,t,a){"use strict";a.r(t);var n=a(45),r=a(55),l=a(57),o=a(56),i=a(58),s=a(0),c=a.n(s),u=a(579),d=a(60),p=a.n(d),m=a(12),h=a.n(m),v=a(8),y=a.n(v),b=a(9),f=a.n(b),g=a(10),P=a.n(g),G=a(7),x=a.n(G),k=a(11),C=a.n(k),E=a(1),I=a.n(E),D=a(2),w=a.n(D),O=a(16),j=a.n(O),B=a(21),A=a.n(B),N=a(6),V=a.n(N),M=(a(5),a(100)),W=a(99),z=a(201),K=a(317),S=a(254),T=a(563),_=a(3),F=a.n(_),H=a(4),J=a.n(H),R=a(20),U=a(13),q=a(109),L=a(561);function Q(e){var t=e.active,a=e.children,n=e.className,r=e.content,l=e.loading,o=J()(Object(R.a)(t,"active"),Object(R.a)(l,"loading"),"tab",n),i=Object(M.a)(Q,e),s=Object(W.a)(Q,e),u={};return s===L.a&&(u.attached="bottom"),c.a.createElement(s,F()({},u,i,{className:o}),U.b.isNil(a)?r:a)}Q.handledProps=["active","as","children","className","content","loading"],Q.defaultProps={as:L.a,active:!0},Q.propTypes={},Q.create=Object(q.e)(Q,function(e){return{content:e}});var X=Q,Y=function(e){function t(){var e,a;y()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=P()(this,(e=x()(t)).call.apply(e,[this].concat(r))),w()(I()(I()(a)),"handleItemClick",function(e,t){var n=t.index;V()(a.props,"onTabChange",e,h()({},a.props,{activeIndex:n})),a.trySetState({activeIndex:n})}),a}return C()(t,e),f()(t,[{key:"getInitialAutoControlledState",value:function(){return{activeIndex:0}}},{key:"renderItems",value:function(){var e=this.props,t=e.panes,a=e.renderActiveOnly,n=this.state.activeIndex;return a?V()(A()(t,"[".concat(n,"]")),"render",this.props):j()(t,function(e,t){var a=e.pane;return X.create(a,{overrideProps:{active:t===n}})})}},{key:"renderMenu",value:function(){var e=this.props,t=e.menu,a=e.panes,n=e.menuPosition,r=this.state.activeIndex;return!0===t.tabular&&"right"===n&&(t.tabular="right"),T.a.create(t,{autoGenerateKey:!1,overrideProps:{items:j()(a,"menuItem"),onItemClick:this.handleItemClick,activeIndex:r}})}},{key:"renderVertical",value:function(e){var t=this.props,a=t.grid,n=t.menuPosition,r=a.paneWidth,l=a.tabWidth,o=p()(a,["paneWidth","tabWidth"]),i=n||"right"===e.props.tabular&&"right"||"left";return c.a.createElement(K.a,o,"left"===i&&S.a.create({width:l,children:e},{autoGenerateKey:!1}),S.a.create({width:r,children:this.renderItems(),stretched:!0},{autoGenerateKey:!1}),"right"===i&&S.a.create({width:l,children:e},{autoGenerateKey:!1}))}},{key:"render",value:function(){var e=this.renderMenu(),a=Object(M.a)(t,this.props),n=Object(W.a)(t,this.props);return e.props.vertical?c.a.createElement(n,a,this.renderVertical(e)):c.a.createElement(n,a,"bottom"!==e.props.attached&&e,this.renderItems(),"bottom"===e.props.attached&&e)}}]),t}(z.a);w()(Y,"autoControlledProps",["activeIndex"]),w()(Y,"defaultProps",{grid:{paneWidth:12,tabWidth:4},menu:{attached:!0,tabular:!0},renderActiveOnly:!0}),w()(Y,"Pane",X),w()(Y,"handledProps",["activeIndex","as","defaultActiveIndex","grid","menu","menuPosition","onTabChange","panes","renderActiveOnly"]),Y.propTypes={};var Z=Y,$=a(39),ee=a.n($),te=a(319),ae=a.n(te),ne=a(157),re={activeGene:""},le=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).state=re,a.renderPlotHeader=function(e){var t=a.props.modulesData.activeGene;return c.a.createElement(u.a,{as:"h4",icon:!0,textAlign:"center"},c.a.createElement(u.a.Content,null,e," plot - expression of gene: ",t))},a.renderViolinPlot=function(){return c.a.createElement(c.a.Fragment,null,a.renderPlotHeader("Violin"),c.a.createElement(ae.a,{className:"full-size large",data:a.createViolinDataPoints(),layout:{height:600,hovermode:"closest",yaxis:{zeroline:!1}}}))},a.createViolinDataPoints=function(){if(a.props.modulesData.cellsByGene.cells.length<1)return"No data registered for this gene.";var e=["grey","green","blue","yellow","purple","brown","pink","orange","red","dark grey","violet","salmon","tomato","khaki","lavender","slateblue","lime","darkcyan"],t=[],n=ee.a.groupBy(a.props.modulesData.cellsByGene.cells,"cluster_id");return Object.keys(n).forEach(function(a){var r={y:ee.a.map(n[a],"CPM"),type:"violin",points:"none",opacity:.5,meanline:{visible:!0},box:{visible:!0},boxpoints:!1,line:{color:"black"},fillcolor:e[a],x0:"Cluster name"+a};t.push(r)}),t},a.createGeneDataPoints=function(){return[{x:ee.a.map(a.props.modulesData.cellsByGene.cells,"tsne_1"),y:ee.a.map(a.props.modulesData.cellsByGene.cells,"tsne_2"),text:ee.a.map(a.props.modulesData.cellsByGene.cells,"cluster_id"),customdata:ee.a.map(a.props.modulesData.cellsByGene.cells,"CPM"),mode:"markers",type:"scattergl",marker:{color:ee.a.map(a.props.modulesData.cellsByGene.cells,"CPM"),colorbar:{title:"CPM",thicknessmode:"fraction",lenmode:"fraction",len:.5,thickness:.01}},hovertemplate:"<b>Cell-type cluster %{text}</b><br><br> CPM:  %{customdata} <extra></extra>",opacity:.5}]},a.renderGenePlot=function(){return a.state.selected&&ee.a.isEmpty(a.props.modulesData.cellsByGene)?ne.a:a.props.modulesData.cellsByGene.cells.length<1?"No data registered for this gene.":c.a.createElement(c.a.Fragment,null,a.renderPlotHeader("Cluster"),c.a.createElement(ae.a,{className:"full-size large",data:a.createGeneDataPoints(),layout:{height:600,hovermode:"closest",yaxis:{title:"test",showgrid:!1,zeroline:!1},xaxis:{title:"test",showgrid:!1,zeroline:!1}}}))},a.panes=[{menuItem:"Cluster",render:function(){return c.a.createElement(Z.Pane,{attached:!1},a.renderGenePlot())}},{menuItem:"Violin",render:function(){return c.a.createElement(Z.Pane,{attached:!1},a.renderViolinPlot())}}],a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,a){return!!ee.a.isEmpty(this.props.modulesData.cellsByGene)||t.activeGene!==this.state.activeGene}},{key:"render",value:function(){var e=this.props.modulesData.activeGene;return e!==this.state.activeGene&&this.setState({activeGene:e}),ee.a.isEmpty(this.props.modulesData.cellsByGene)?null:c.a.createElement(c.a.Fragment,null,c.a.createElement(K.a.Row,{centered:!0},c.a.createElement(K.a.Column,null,c.a.createElement(Z,{menu:{secondary:!0,pointing:!0},panes:this.panes}))))}}]),t}(s.Component);t.default=le}}]);
//# sourceMappingURL=3.af688dbe.chunk.js.map