{"version":3,"sources":["components/modules/ClusterViewer/items/GeneralCluster.js"],"names":["initialState","dataReady","GeneralCluser","state","createDataPoints","plotTraces","clusters","_","groupBy","_this","props","modulesData","cells","Object","keys","forEach","key","trace","x","map","y","mode","type","name","text","hovertemplate","opacity","push","renderGenePlot","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","Fragment","react_plotly_js__WEBPACK_IMPORTED_MODULE_8___default","className","data","layout","height","hovermode","yaxis","title","showgrid","zeroline","xaxis","nextProps","nextState","nextContext","this","length","_hooks_pageLoader__WEBPACK_IMPORTED_MODULE_10__","frame","setState","semantic_ui_react__WEBPACK_IMPORTED_MODULE_6__","Row","Column","width","semantic_ui_react__WEBPACK_IMPORTED_MODULE_7__","Component"],"mappings":"2NAMMA,EAAe,CAACC,WAAW,GAE3BC,6MAEFC,MAAQH,IAMRI,iBAAmB,WACf,IAAMC,EAAa,GACbC,EAAWC,IAAEC,QAAQC,EAAKC,MAAMC,YAAYC,MAAO,cAezD,OAdAC,OAAOC,KAAKR,GAAUS,QAAQ,SAACC,GAC3B,IAAMC,EAAQ,CACVC,EAAGX,IAAEY,IAAIb,EAASU,GAAM,UACxBI,EAAGb,IAAEY,IAAIb,EAASU,GAAM,UACxBK,KAAM,UACNC,KAAM,YACNC,KAAMP,EACNQ,KAAMjB,IAAEY,IAAIb,EAASU,GAAM,cAC3BS,cAAe,mDACfC,QAAS,IAGbrB,EAAWsB,KAAKV,KAEbZ,KAEXuB,eAAiB,WACb,OACIC,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACIH,EAAAC,EAAAC,cAACE,EAAAH,EAAD,CACII,UAAW,kBACXC,KAAM1B,EAAKL,mBACXgC,OAAQ,CACJC,OAAQ,IACRC,UAAW,UACXC,MAAO,CACHC,MAAO,OACPC,UAAU,EACVC,UAAU,GAEdC,MAAO,CACHH,MAAO,OACPC,UAAU,EACVC,UAAU,6FAxCZE,EAAWC,EAAWC,GACxC,OAASC,KAAK5C,MAAMF,WAAa4C,EAAU5C,2CA+C3C,OAAI8C,KAAKrC,MAAMC,YAAYC,MAAMoC,OAAS,EAAUnB,EAAAC,EAAAC,cAACkB,EAAA,EAAD,CAAYC,OAAO,KAClEH,KAAK5C,MAAMF,WAAW8C,KAAKI,SAAS,CAAClD,WAAW,IAEjD4B,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACIH,EAAAC,EAAAC,cAACqB,EAAA,EAAKC,IAAN,KACIxB,EAAAC,EAAAC,cAACqB,EAAA,EAAKE,OAAN,CAAaC,MAAO,IAChB1B,EAAAC,EAAAC,cAACyB,EAAA,EAAD,KACKT,KAAKnB,6BA3DN6B,aAoEbvD","file":"static/js/4.15f80c83.chunk.js","sourcesContent":["import React, {Component} from 'react'\nimport {Grid, Segment,} from 'semantic-ui-react'\nimport Plot from 'react-plotly.js';\nimport _ from 'lodash'\nimport PageLoader from \"../../../hooks/pageLoader\";\n\nconst initialState = {dataReady: false}\n\nclass GeneralCluser extends Component {\n\n    state = initialState;\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        return (!this.state.dataReady && nextState.dataReady)\n    }\n\n    createDataPoints = () => {\n        const plotTraces = [];\n        const clusters = _.groupBy(this.props.modulesData.cells, 'cluster_id')\n        Object.keys(clusters).forEach((key) => {\n            const trace = {\n                x: _.map(clusters[key], 'tsne_1'),\n                y: _.map(clusters[key], 'tsne_2'),\n                mode: 'markers',\n                type: 'scattergl',\n                name: key,\n                text: _.map(clusters[key], 'cluster_id'),\n                hovertemplate: \"<b>Cell-type cluster %{text}</b> <extra></extra>\",\n                opacity: 0.5,\n\n            };\n            plotTraces.push(trace)\n        });\n        return plotTraces\n    }\n    renderGenePlot = () => {\n        return (\n            <>\n                <Plot\n                    className={'full-size large'}\n                    data={this.createDataPoints()}\n                    layout={{\n                        height: 600,\n                        hovermode: 'closest',\n                        yaxis: {\n                            title: \"test\",\n                            showgrid: false,\n                            zeroline: false,\n                        },\n                        xaxis: {\n                            title: \"test\",\n                            showgrid: false,\n                            zeroline: false,\n                        }\n                    }}\n                />\n            </>\n        )\n    }\n    render() {\n        if (this.props.modulesData.cells.length < 1) return <PageLoader frame={true} />\n        if (!this.state.dataReady) this.setState({dataReady: true})\n        return (\n            <>\n                <Grid.Row>\n                    <Grid.Column width={16}>\n                        <Segment>\n                            {this.renderGenePlot()}\n                        </Segment>\n                    </Grid.Column>\n                </Grid.Row>\n            </>\n        )\n    }\n}\n\nexport default GeneralCluser\n"],"sourceRoot":""}