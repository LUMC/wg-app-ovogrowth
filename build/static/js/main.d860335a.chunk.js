(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{158:function(e,t,n){"use strict";var a=n(0),l=n.n(a),r=n(559),o=n(211),c=n(319),i=n(316),s=n.n(i),u=function(){return l.a.createElement(r.a,{loading:!0},l.a.createElement(o.a,{src:s.a}))};t.a=function(e){return e.frame?l.a.createElement(c.a.Row,null,l.a.createElement(c.a.Column,{width:16,textAlign:"center"},u())):u()}},316:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAnEAAABCCAMAAAAPInAgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NDZFOEY5NDREQTMxMUU0OEI0MDhCMEM5RjBBNDFEMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2NDZFOEY5NTREQTMxMUU0OEI0MDhCMEM5RjBBNDFEMyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjY0NkU4RjkyNERBMzExRTQ4QjQwOEIwQzlGMEE0MUQzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY0NkU4RjkzNERBMzExRTQ4QjQwOEIwQzlGMEE0MUQzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jI2B7AAAAF1QTFRFvL7AwMLEyMnL5ufoycrMxsjKwcPFzc7Q8PDx+fn68fHy0dLUyszNxsjJvsDB7+/w5OXmxMXH6uvrxsfJ+vr7wsTG+fn50NHTvsDCxcbIysvN7e3u4+Tl1dfY////DQ3b9AAAAB90Uk5T////////////////////////////////////////AM0ZdhAAAADiSURBVHja7NrHDcMwEEVBOknOOaf+y/TdhnkiFwI0U8Li3fany2kIUZpXmiSI0yoOxaE4UByKA8WhOBQHgcWtHIHQ4vbbEUR5PtIbIikOxaE4UByKA8WhOBQHikNxoDgUB4qjU8Xd0wD+Ws9LF2cDTNZUcSgOxSkOxaE4xaE4FIfiFIfiUJzi6GJxNzclZ1O6uKVPPhnX4p988xns41AcKA7FgeJQHIoDxaE4UByKA8WhOPpb3MECjHqa809xNsDULG6mOBSH4kBxKA4Uh+JQnOJQHL0pbrEbQy3t8bu4jwADAOWOuJvLET/EAAAAAElFTkSuQmCC"},358:function(e,t,n){e.exports=n(558)},556:function(e,t,n){},558:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(47),o=n.n(r),c=n(89),i=n(27),s=n(296),u=n(318),p=n(34),m=n.n(p),d=n(49),E=n(45),f=n(55),g=n(57),h=n(56),v=n(58),y=n(572),b=n(561),C=n(578),w=n(567),S=n(319),A=n(317),G=n(170),_=n(32),O=n(46),D=Object(O.a)(),j=n(297),k=n.n(j),L={exit:{opacity:0,y:20},enter:{opacity:1,y:0,delay:function(e){return 60*e.charIndex}}},B=function(e){function t(){return Object(E.a)(this,t),Object(g.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"renderSubMenu",value:function(e){return e.length<1?null:l.a.createElement(y.a,{text:"More",pointing:!0,className:"link item"},l.a.createElement(y.a.Menu,null,e.map(function(e,t){return l.a.createElement(y.a.Item,{name:e.reference,key:"menuItem-".concat(t),as:G.a,to:"/"+e.reference},e.name)})))}},{key:"renderMenu",value:function(){if(this.props.menu.length<1)return null;var e=[];return l.a.createElement(b.a,{inverted:!0,widths:6,className:"mainMenu",pointing:!0,secondary:!0,stackable:!0},l.a.createElement(_.b,{history:D},this.props.menu.map(function(t,n){return t.subitem?(e.push(t),null):l.a.createElement(b.a.Item,{name:t.reference,key:"menuItem-".concat(n),as:G.a,to:"/"+t.reference},t.name)}),this.renderSubMenu(e)))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"appContent"},l.a.createElement("div",{className:"welcome"},l.a.createElement(C.a,{visible:this.props.sloganText,animation:"fade up",duration:{show:2e3}},l.a.createElement("div",null,l.a.createElement(k.a,{className:"particles",params:{particles:{number:{value:30},size:{value:10,random:!0},line_linked:{width:2},opacity:{anim:{"anim.enable":!1}}}}}))),l.a.createElement(w.a,null,l.a.createElement(S.a,{columns:1},l.a.createElement(S.a.Row,{verticalAlign:"middle",className:"welcome-box"},l.a.createElement(S.a.Column,{textAlign:"center"},l.a.createElement("div",{className:"introName"},l.a.createElement(A.a,{initialPose:"exit",pose:"enter",charPoses:L},this.props.applicationDetails.title)),l.a.createElement("div",{className:"sloganText"},l.a.createElement(C.a,{unmountOnHide:!1,visible:this.props.sloganText,animation:"fade up",duration:{show:1e3}},l.a.createElement("div",null,this.props.applicationDetails.sub_title))))),l.a.createElement(C.a,{unmountOnHide:!1,visible:this.props.sloganText,animation:"fade down",duration:{show:800}},l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,this.renderMenu())))))),l.a.createElement(C.a,{unmountOnHide:!1,visible:this.props.sloganText,animation:"fade up",duration:{show:1e3}},l.a.createElement("div",{className:"page-section"},l.a.createElement(w.a,null,this.props.activePageContent)))))}}]),t}(a.Component),I=n(559),N=n(575),x=n(570),T=n(79),R=n(37),M=n.n(R),F=(n(470),n(173)),U=n.n(F),P="http://165.22.196.58:8080/OvoGrowth",Z=U.a.create({baseURL:P}),Y="application configuration could not be received from API",J="config item is assigned to an unknown module",z="module config does not contain the required attrs",H="reference alias doesn't refer to an item",Q=function(e){return M.a.values(M.a.filter(e,function(e){return"published"===e.status||"published"===e.published}))},W=function(e,t){return t.every(function(t){return Object.keys(e).includes(t)})},V=function(e,t){return t.hasOwnProperty(e)},X=function e(){Object(E.a)(this,e)};X.config=function(e){console.error("Configuration error -  ".concat(e))},X.module=function(e){console.error("Module error -  ".concat(e))},X.moduleAttr=function(e,t){console.error("Module error -  ".concat(e," ").concat(z,": ").concat(t))};var q,K="SET_CONFIG",$="ADD_COLLECTION",ee="PROTOCOL_COMPLETED",te="PROTOCOL_FAILED",ne="GET_APPLICATION_DONE",ae={GET_CELLS:"GET_CELLS",CLEAR_CELLS:"CLEAR_CELLS",CLEAR_CELLS_BY_GENE:"CLEAR_CELLS_BY_GENE",GET_CELLS_BY_GENE:"GET_CELLS_BY_GENE",GET_GENE_SUGGESTION:"GET_GENE_SUGGESTION",SET_ACTIVE_DATASET:"SET_ACTIVE_DATASET"},le=n(560),re=n(130),oe=function(e){switch(e.setting.config.type){case"github":return l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,{textAlign:"center"},l.a.createElement("a",{href:e.setting.config.config.link,target:"_blank",rel:"noopener noreferrer"},l.a.createElement(le.a,{as:"div",labelPosition:"right"},l.a.createElement(le.a,{color:"blue"},l.a.createElement(T.a,{name:"github"}),"GitHub"),l.a.createElement(re.a,{basic:!0,pointing:"left"},e.setting.config.config.label)))));case"download":return l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,{textAlign:"center"},l.a.createElement("a",{href:e.setting.config.config.link,download:!0,target:"_blank"},l.a.createElement(le.a,{icon:!0,labelPosition:"left"},l.a.createElement(T.a,{name:"cloud"}),e.setting.config.config.label))));default:return X.module("Button not rendered, type: ".concat(e.moduleName," not found")),null}},ce=n(69),ie=n.n(ce),se=n(577),ue=["reference_alias","content"],pe=function(e){if(e.collection){if(!W(e.collection[0],ue))return X.moduleAttr("content",ue),null;var t=M.a.keyBy(e.collection,"reference_alias");return V(e.setting.alias_ref,t)?l.a.createElement(l.a.Fragment,null,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h2";return e?l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,l.a.createElement(se.a,{as:t},e))):null}(t[e.setting.alias_ref].title),l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,{className:"container-".concat(e.setting.alias_ref)},ie()(t[e.setting.alias_ref].content)))):(X.module(H),null)}return null},me=n(298),de=n.n(me),Ee=["icon","title","step_name","description","tags"],fe=function(e){return e.collection?W(e.collection[0],Ee)?l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,{className:"timeLine"},e.collection.map(function(e,t){var n=(t+1)%2===1?"left":"right";return l.a.createElement(de.a,{key:"timelineItem-".concat(t),className:"time-item",direction:n,icon:e.icon,title:e.title,time:"".concat(t+1," ").concat(e.step_name),description:e.description,color:"blue",tags:e.tags,lineHeight:t})}))):(X.moduleAttr("tool_steps",Ee),null):null},ge=n(211),he=n(573),ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h2";return e?l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,l.a.createElement(se.a,{as:t},e))):null},ye=function(e){var t=["icon","title","description"];if(!W(e.collection[0],t))return X.moduleAttr("tool_steps",t),null;var n=M.a.keyBy(e.collection,"reference_alias");return V(e.setting.alias_ref,n)?l.a.createElement(l.a.Fragment,null,ve(e.setting.title),l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,l.a.createElement(he.a,{divided:!0,relaxed:!0},e.collection.map(function(t,n){return l.a.createElement(he.a.Item,{key:"list-icon-".concat(n,"-").concat(e.setting.collection)},l.a.createElement(he.a.Icon,{name:t.icon,size:"large",verticalAlign:"top"}),l.a.createElement(he.a.Content,null,l.a.createElement(he.a.Header,{as:"a"},t.title),l.a.createElement(he.a.Description,{as:"a"},t.description)))}))))):(X.module(H),null)},be=function(e){var t=["link","title","description"];if(!W(e.collection[0].items[0],t))return X.moduleAttr("tool_steps",t),null;var n=M.a.keyBy(e.collection,"reference_alias");return V(e.setting.alias_ref,n)?l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,ve(e.setting.title,"h3"),l.a.createElement(he.a,null,n[e.alias_ref].items.map(function(e,t){return l.a.createElement(he.a.Item,{key:"download-list-".concat(t)},l.a.createElement(ge.a,{avatar:!0},l.a.createElement("a",{href:e.link,download:!0},l.a.createElement(T.a,{avatar:"true",circular:!0,inverted:!0,name:"download"}))),l.a.createElement(he.a.Content,null,l.a.createElement(he.a.Header,null,e.title),e.description))})))):(X.module(H),null)},Ce=function(e){if(e.collection)switch(e.setting.config.type){case"icon-list":return ye(e);case"download-list":return be(e);default:return null}return null},we=function(e){if(e.collection){var t=["question","answer"];return W(e.collection[0],t)?l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,e.collection.map(function(e,t){return l.a.createElement("div",{key:"question-answer-".concat(t)},l.a.createElement("p",null,l.a.createElement("b",null,"Q: ",e.question)),ie()(e.answer),l.a.createElement("br",null))}))):(X.moduleAttr("faqs",t),null)}return null},Se=n(574),Ae=function(e){try{return e.image.data.full_url}catch(t){return"https://via.placeholder.com/150"}},Ge=function(e){if(e.collection){var t=["name","job_description","year_joined"];return W(e.collection[0],t)?l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,l.a.createElement(Se.a.Group,{textAlign:"center",itemsPerRow:3},e.collection.map(function(e,t){return function(e,t){return l.a.createElement(Se.a,{key:"contact-card-".concat(t)},l.a.createElement(ge.a,{src:Ae(e),wrapped:!0,ui:!1}),l.a.createElement(Se.a.Content,null,l.a.createElement(Se.a.Header,null,e.name),l.a.createElement(Se.a.Meta,null,l.a.createElement("span",{className:"date"},"Joined in ",e.year_joined,e.year_left?", left in "+e.year_left:"")),l.a.createElement(Se.a.Description,null,e.job_description)),l.a.createElement(Se.a.Content,{extra:!0},l.a.createElement(T.a,{name:"mail"}),e.email))}(e,t)})))):(X.moduleAttr("contact-cards",t),null)}return null},_e=n(571),Oe=n(205),De=n(291),je=n(292),ke=function(e){return e?void 0:"Required"},Le=(q=5,n(568),n(569)),Be=function(e,t,n,a){return l.a.createElement(_e.a.Field,null,l.a.createElement("label",null,t),l.a.createElement(Le.a,Object.assign({},e,a,{autoComplete:"off"})),function(e){var t=e.touched,n=e.error;if(t&&n)return l.a.createElement("div",{className:"errorMessage"},n)}(n))},Ie=n(212),Ne=function(e){var t=e.input,n=(t.value,Object(Ie.a)(t,["value"])),a=e.meta,r=Object(Ie.a)(e,["input","meta"]);return l.a.createElement(_e.a.Field,null,l.a.createElement("label",null,r.label),l.a.createElement(Le.a,Object.assign({type:"file"},n,r.input,{autoComplete:"off"})),function(e){var t=e.touched,n=e.error;if(t&&n)return l.a.createElement("div",{className:"errorMessage"},n)}(a))},xe=function(e,t,n,a){return l.a.createElement(_e.a.Field,null,l.a.createElement("label",null,t),l.a.createElement(y.a,Object.assign({selection:!0},e,a,{value:e.value,onChange:function(t,n){return e.onChange(n.value)},placeholder:t})),function(e){var t=e.touched,n=e.error;if(t&&n)return l.a.createElement("div",{className:"errorMessage"},n)}(n))},Te=function(e){var t=e.input,n=e.label,a=e.meta,l=e.inputAttr;return Be(t,n,a,l)},Re=function(e){return Ne(e)},Me=function(e){var t=e.input,n=e.label,a=e.meta,l=e.inputAttr;return xe(t,n,a,l)},Fe=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={fileInputCode:"fileCode"},n.onSubmit=function(e,t){n.props.onSubmit(n.props.collection.form[0],e),t(Object(Oe.a)("mainForm")),n.setState({fileInputCode:Math.random().toString(36).substring(7)})},n.renderInputType=function(e,t){switch(e.input_type.type){case"text":return l.a.createElement(De.a,{key:"field-input-".concat(t),name:e.api_reference_parameter,component:Te,validate:[ke],label:e.label,inputAttr:{placeholder:"Enter the ".concat(e.label.toLowerCase()),type:"text"}});case"file":return l.a.createElement(De.a,{key:"field-input-".concat(t,"-").concat(n.state.fileInputCode),name:e.api_reference_parameter,component:Re,label:e.label,inputAttr:{placeholder:"Enter the ".concat(e.label.toLowerCase())}});case"select":var a=n.createOptions(t,e.option_titles,e.option_values);return l.a.createElement(De.a,{key:"field-input-".concat(t),name:e.api_reference_parameter,component:Me,validate:[ke],label:e.label,inputAttr:{placeholder:"Enter the ".concat(e.label.toLowerCase()),options:a}});default:return null}},n.createOptions=function(e,t,n){var a=[];return t.forEach(function(l,r){a.push({key:"optionItem-".concat(e,"-").concat(r),text:t[r],value:n[r]})}),a},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"renderForm",value:function(){return this.props.collection.inputs.length<1?l.a.createElement("b",null,l.a.createElement("i",null,"Form under construction!")):l.a.createElement("div",null,this.renderInputs(),l.a.createElement(le.a,{type:"submit",icon:!0,labelPosition:"left",size:"large",floated:"right"},l.a.createElement(T.a,{name:"paper plane"}),"Run!"))}},{key:"renderInputs",value:function(){var e=this;return this.props.collection.inputs.map(function(t,n){return e.renderInputType(t,n)})}},{key:"render",value:function(){if(!this.props.collection.inputs)return null;var e="form:form",t=["title","api","tool_reference","description"];return W(this.props.collection.form[0],t)?(e="form:inputs",t=["api_reference_parameter","label","input_type"],W(this.props.collection.inputs[0],t)?l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,this.props.protocolStatus===ee?l.a.createElement(C.a,{transitionOnMount:!0,animation:"slide down",duration:{show:1e3}},l.a.createElement(I.a,{color:"green"},l.a.createElement("b",null,"Algorithm executed!")," Dataset will be in your mail when ready")):"",this.props.protocolStatus===te?l.a.createElement(C.a,{transitionOnMount:!0,animation:"slide down",duration:{show:1e3}},l.a.createElement(I.a,{color:"red"},l.a.createElement("b",null,"Algorithm encountered an error!")," please make sure the configuration is setup correctly")):"",l.a.createElement("h3",null,"Configuration"),l.a.createElement(_e.a,{onSubmit:this.props.handleSubmit(this.onSubmit)},this.renderForm()))):(X.moduleAttr(e,t),null)):(X.moduleAttr(e,t),null)}}]),t}(a.Component),Ue=Object(je.a)({form:"mainForm"})(Fe),Pe=n(158),Ze=n(576),Ye={isLoading:!1,value:""},Je=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state=Ye,n.handleResultSelect=function(e,t){var a=t.result;n.setState({value:a.title,selected:!0,selectedGene:a.id}),n.props.getCellsByGene(a.id,a.title)},n.handleSearchChange=function(e){n.props.getGeneSuggestions(e.target.value),n.setState({value:e.target.value,selected:!1})},n.resetSelectedGene=function(){n.props.resetCellByGene(),n.setState({value:""})},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.modulesData.activeGene;e!==this.state.value&&this.setState({value:e})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.value;return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a.Row,{centered:!0},l.a.createElement(S.a.Column,{width:8},l.a.createElement(_e.a,null,l.a.createElement(_e.a.Field,null,l.a.createElement("label",null,"Visualize expression using the gene symbol"),l.a.createElement(Ze.a,Object.assign({loading:t,onResultSelect:this.handleResultSelect,onSearchChange:M.a.debounce(this.handleSearchChange,500,{leading:!0}),results:this.props.modulesData.geneSuggestions,value:n},this.props)))))))}}]),t}(a.Component),ze=n(176),He=l.a.lazy(function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,583))}),Qe=l.a.lazy(function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,584))}),We={isLoading:!1,value:"",selected:!1,selectedGene:null,graphSetting:"all",ds:"",datasetOptions:[],datasetIndex:0,annotation:[]},Ve=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=We,n.setDataset=function(e,t){var a=M.a.map(n.props.collection.ds,function(e){return e.dataset.id}).indexOf(t.value);n.setState({ds:t.value,datasetIndex:a}),n.setAnnotation(t.value),n.props.setActiveDataset(t.value),n.props.getCells()},n.setAnnotation=function(e){var t=n.props.collection.annotation.map(function(t){return t.dataset.id===e?t:null});t=t.filter(Boolean),n.setState({annotation:M.a.keyBy(t,"cluster_id")})},n.loadImage=function(e,t){return e?l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,l.a.createElement(se.a,{as:"h3",dividing:!0},"Image atlas of ",t))),l.a.createElement(ze.a,{url:e,allow:"fullscreen",scrolling:"no",className:"iframe",display:"initial",position:"relative"})):null},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.collection.ds[0].dataset;this.setState({ds:e.id,datasetOptions:this.props.collection.ds.map(function(e,t){return{n:t,text:e.type,value:e.dataset.id}})}),this.setAnnotation(e.id),this.props.setActiveDataset(e.id),this.props.getCells()}},{key:"render",value:function(){if(this.props.modulesData.cells.length<1)return null;var e=this.props.collection.ds[this.state.datasetIndex];return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a.Row,{centered:!0},l.a.createElement(S.a.Column,{width:8},l.a.createElement(_e.a,null,l.a.createElement(_e.a.Field,null,l.a.createElement("label",null,"Select a dataset type"),l.a.createElement(y.a,{value:this.state.ds,placeholder:"Stage",search:!0,selection:!0,options:this.state.datasetOptions,onChange:this.setDataset}))))),l.a.createElement(Je,{getCellsByGene:this.props.getCellsByGene,getGeneSuggestions:this.props.getGeneSuggestions,modulesData:this.props.modulesData,resetCellByGene:this.props.resetCellByGene}),l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,l.a.createElement(se.a,{as:"h3",dividing:!0},e.type))),l.a.createElement(S.a.Row,{centered:!0},l.a.createElement(S.a.Column,{width:8},l.a.createElement("p",null,l.a.createElement("b",null,"Authors"),ie()(e.citation),l.a.createElement("b",null,"Sequencing platform")," ",ie()(e.data_origin),l.a.createElement("b",null,"Data availability ")," ",ie()(e.geo)))),l.a.createElement(a.Suspense,{fallback:l.a.createElement(Pe.a,{frame:!0})},l.a.createElement(He,{annotation:this.state.annotation,dataset:this.state.ds,collection:this.props.collection,modulesData:this.props.modulesData})),l.a.createElement(a.Suspense,{fallback:M.a.isEmpty(this.props.modulesData.cellsByGene)?null:l.a.createElement(Pe.a,{frame:!0})},l.a.createElement(Qe,{dataset_scale:e.expression_scale,annotation:this.state.annotation,dataset:this.state.ds,collection:this.props.collection,modulesData:this.props.modulesData})),this.loadImage(e.img_url,e.type))}}]),t}(a.Component),Xe=function(e){return console.log(e.collection),e.collection.length<0?(X.module("ImageModule not rendered, type: ".concat(e.moduleName," not found")),null):e.collection.map(function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,l.a.createElement(se.a,{as:"h3",dividing:!0},e.name))),l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,ie()(e.description))),l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,l.a.createElement(le.a,{className:"button-external",as:"a",href:e.img_url,target:"_blank"},l.a.createElement("span",null,"External site \xa0")," ",l.a.createElement(T.a,{name:"external alternate"})))),l.a.createElement(ze.a,{url:e.img_url,allow:"fullscreen",scrolling:"no",className:"iframe",display:"initial",position:"relative"}))})},qe=function(e){switch(e.setting.module){case"content":return l.a.createElement(pe,{setting:e.setting,collection:e.collection});case"button":return l.a.createElement(oe,{setting:e.setting});case"tool_steps":return l.a.createElement(fe,{collection:e.collection});case"list":return l.a.createElement(Ce,{alias_ref:e.setting.alias_ref,setting:e.setting,collection:e.collection});case"faqs":return l.a.createElement(we,{collection:e.collection});case"contact-cards":return l.a.createElement(Ge,{collection:e.collection});case"form":return l.a.createElement(Ue,{onSubmit:e.onSubmit,collection:e.collection,protocolStatus:e.protocolStatus});case"cluster-viewer":return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ve,{getCells:e.getCells,alias_ref:e.setting.alias_ref,collection:e.collection,getCellsByGene:e.getCellsByGene,getGeneSuggestions:e.getGeneSuggestions,setActiveDataset:e.setActiveDataset,modulesData:e.modulesData.cellTypeViewer,resetCellByGene:e.resetCellByGene}));case"image-module":return l.a.createElement(l.a.Fragment,null,l.a.createElement(Xe,{collection:e.collection}));default:return X.module(J),null}},Ke=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={loaded:!1},n.renderSpecificModule=function(e){},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({loaded:!0})}},{key:"componentWillUnmount",value:function(){this.setState({loaded:!1})}},{key:"getCollection",value:function(e){return e&&e in this.props.collections?this.props.collections[e]:null}},{key:"renderModules",value:function(){var e=this;return this.props.config.settings.map(function(t,n){return"form"===t.module?l.a.createElement(qe,{modulesData:e.props.modulesData,getGeneSuggestions:e.props.getGeneSuggestions,getCells:e.props.getCells,getCellsByGene:e.props.getCellsByGene,resetCellByGene:e.props.resetCellByGene,setActiveDataset:e.props.setActiveDataset,onSubmit:e.props.onSubmit,page:e.props.config.name,key:"module-".concat(e.props.config.reference,"-").concat(n),collection:{form:e.getCollection(t.collection),inputs:e.getCollection("inputs")},setting:t,protocolStatus:e.props.protocolStatus}):"cluster-viewer"===t.module?l.a.createElement(qe,{modulesData:e.props.modulesData,getGeneSuggestions:e.props.getGeneSuggestions,getCells:e.props.getCells,getCellsByGene:e.props.getCellsByGene,resetCellByGene:e.props.resetCellByGene,setActiveDataset:e.props.setActiveDataset,onSubmit:e.props.onSubmit,page:e.props.config.name,key:"module-".concat(e.props.config.reference,"-").concat(n),collection:{ds:e.getCollection(t.collection),annotation:e.getCollection("cluster_annotation")},setting:t,protocolStatus:e.props.protocolStatus}):l.a.createElement(qe,{modulesData:e.props.modulesData,getCells:e.props.getCells,getGeneSuggestions:e.props.getGeneSuggestions,getCellsByGene:e.props.getCellsByGene,setActiveDataset:e.props.setActiveDataset,resetCellByGene:e.props.resetCellByGene,page:e.props.config.name,key:"module-".concat(e.props.config.reference,"-").concat(n),collection:e.getCollection(t.collection),setting:t})})}},{key:"render",value:function(){return this.props.path?l.a.createElement(S.a,null,l.a.createElement(S.a.Row,null,l.a.createElement(S.a.Column,null,l.a.createElement(se.a,{as:"h1",dividing:!0},this.props.config.name))),this.renderModules()):null}}]),t}(a.Component),$e=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(g.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={menu:[],sloganText:!1,pageView:!1,render:!1,config:!1},n.onSubmit=function(e,t){switch(e.api.protocol){case"direct":n.props.directProtocol(e,t);break;default:console.log("No valid protocol connected to form")}},n.getCollections=function(){var e=[];return n.props.config.forEach(function(t){t.settings.forEach(function(t){t.collection&&("form"===t.collection&&(e.push(t.collection),e.push("inputs")),"expression_viewer"===t.collection&&(e.push(t.collection),e.push("cluster_annotation")),e.push(t.collection))})}),M.a.uniq(e)},n.loadConfig=Object(d.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.getApplication();case 2:return e.next=4,n.props.getConfig();case 4:return t=n.getCollections(),e.next=7,n.props.getCollections(t);case 7:n.setState({menu:n.props.config});case 8:case"end":return e.stop()}},e)})),n.wrapTransition=function(e){return e},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({config:!0})}},{key:"componentDidMount",value:function(){var e=this;this.loadConfig(),setTimeout(function(){this.setState({render:!0})}.bind(this),3e3),setTimeout(function(){e.setState({sloganText:!0})},1200)}},{key:"renderRoutes",value:function(){var e=this;return this.props.config.map(function(t){return l.a.createElement(_.a,{key:"route-".concat(t.reference),path:"/"+t.reference,exact:!0,render:function(n){return e.wrapTransition(l.a.createElement(Ke,Object.assign({},n,{modulesData:e.props.modules,getGeneSuggestions:e.props.getGeneSuggestions,getCells:e.props.getCells,getCellsByGene:e.props.getCellsByGene,resetCellByGene:e.props.resetCellByGene,setActiveDataset:e.props.setActiveDataset,path:"/"+t.reference,config:t,collections:e.props.collections,onSubmit:e.onSubmit,protocolStatus:e.props.protocolStatus})))}})})}},{key:"renderContent",value:function(){var e=this;return 0===this.props.config.length?null:l.a.createElement(_.b,{history:D},l.a.createElement(_.c,null,l.a.createElement(_.a,{path:"/",exact:!0,render:function(t){return e.wrapTransition(l.a.createElement(Ke,Object.assign({},t,{modulesData:e.props.modules,getGeneSuggestions:e.props.getGeneSuggestions,getCells:e.props.getCells,getCellsByGene:e.props.getCellsByGene,resetCellByGene:e.props.resetCellByGene,setActiveDataset:e.props.setActiveDataset,path:"/"+e.props.config[0].reference,config:e.props.config[0],collections:e.props.collections,protocolStatus:e.props.protocolStatus,onSubmit:e.onSubmit})))}}),this.renderRoutes()))}},{key:"render",value:function(){return this.state.render&&!M.a.isEmpty(this.props.config)?(document.documentElement.style.setProperty("--color-primary",this.props.application.primary_color),l.a.createElement(B,{applicationDetails:this.props.application,activePageContent:this.renderContent(),collections:this.props.collections,config:this.props.config,menu:this.props.config})):this.state.render?(X.config(Y),l.a.createElement(I.a,{className:"loading-segment"},l.a.createElement(N.a,{active:!0},l.a.createElement(T.a,{name:"close",size:"huge",inverted:!0,color:"grey"}),l.a.createElement("br",null),l.a.createElement("p",null,"Failed to load website")))):l.a.createElement(I.a,{className:"loading-segment"},l.a.createElement(N.a,{active:!0},l.a.createElement(x.a,{indeterminate:!0,inline:"centered"},"Preparing the ","OvoGrowth"," website")))}}]),t}(a.Component),et={getCells:function(){return function(){var e=Object(d.a)(m.a.mark(function e(t,n){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ae.CLEAR_CELLS_BY_GENE}),t({type:ae.CLEAR_CELLS}),e.next=4,Z.get("/items/cell?limit=50000&\n    filter[dataset]=".concat(n().modules.cellTypeViewer.activeDataset));case 4:a=e.sent,t({type:ae.GET_CELLS,payload:a.data.data});case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},getCellsByGene:function(e,t){return function(){var n=Object(d.a)(m.a.mark(function n(a,l){var r,o;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:ae.CLEAR_CELLS_BY_GENE}),r=l().modules.cellTypeViewer.activeDataset,n.next=4,Z.post("custom/data/cell-GE",{geneId:e,dataset:r});case 4:o=n.sent,a({type:ae.GET_CELLS_BY_GENE,payload:{data:o.data,geneId:e,geneName:t}});case 6:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()},getGeneSuggestions:function(e){return function(){var t=Object(d.a)(m.a.mark(function t(n){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z.get("/items/gene?limit=5&filter[symbol][logical]=or&\n    filter[symbol][rlike]=".concat(e,"%&"));case 2:a=t.sent,n({type:ae.GET_GENE_SUGGESTION,payload:a.data.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},resetCellByGene:function(){return{type:ae.CLEAR_CELLS_BY_GENE}},setActiveDataset:function(e){return{type:ae.SET_ACTIVE_DATASET,payload:e}}},tt=Object(c.b)(function(e){return{config:M.a.values(e.config),collections:e.collections,protocolStatus:e.protocolStatus,application:e.application[0],modules:e.modules}},Object(u.a)({getConfig:function(){return function(){var e=Object(d.a)(m.a.mark(function e(t){var n,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.get("items/config");case 2:n=e.sent,a=Q(n.data.data),t({type:K,payload:a});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},getApplication:function(){return function(){var e=Object(d.a)(m.a.mark(function e(t){var n,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.get("items/application");case 2:n=e.sent,a=Q(n.data.data),t({type:ne,payload:a});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},getCollections:function(e){return function(t){var n=0,a={};e.forEach(function(){var l=Object(d.a)(m.a.mark(function l(r){var o;return m.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Z.get("items/"+r+"?fields=*.*.*");case 2:o=l.sent,a[r]=Q(o.data.data),++n===e.length&&t({type:$,payload:a});case 6:case"end":return l.stop()}},l)}));return function(e){return l.apply(this,arguments)}}())}},directProtocol:function(e,t){return function(){var n=Object(d.a)(m.a.mark(function n(a){var l;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(l=new FormData).set("email",t.email),l.set("training",t.training),l.append("file",t.file[0]),n.next=6,U()({method:"post",url:e.tool_reference,data:l,config:{headers:{"Content-Type":"multipart/form-data",Accept:"text/html"}}});case 6:a({type:ee});case 7:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()}},et))($e),nt=(n(288),n(556),n(293)),at=Object(i.c)({cells:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae.GET_CELLS:return t.payload;case ae.CLEAR_CELLS:return[];default:return e}},cellsByGene:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae.GET_CELLS_BY_GENE:return t.payload.data;case ae.CLEAR_CELLS_BY_GENE:return{};default:return e}},geneSuggestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae.GET_GENE_SUGGESTION:return t.payload.map(function(e){return{title:e.symbol,description:e.description,id:e.id}});default:return e}},activeGene:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae.GET_CELLS_BY_GENE:return t.payload.geneName;case ae.CLEAR_CELLS_BY_GENE:return"";default:return e}},activeDataset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae.SET_ACTIVE_DATASET:return t.payload;default:return e}}}),lt=Object(i.c)({cellTypeViewer:at}),rt=Object(i.c)({form:nt.a,protocolStatus:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case ee:return ee;default:return""}},application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return t.payload;default:return e}},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return t.payload;default:return e}},collections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return t.payload;default:return e}},modules:lt}),ot=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,ct=Object(i.e)(rt,ot(Object(i.a)(s.a)));o.a.render(l.a.createElement(c.a,{store:ct},l.a.createElement(tt,null)),document.getElementById("root"))}},[[358,2,3]]]);
//# sourceMappingURL=main.d860335a.chunk.js.map